<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>StayVia ‚Äî Property Management</title>
<link rel="icon" type="image/png" href="/favicon.png?v=2">
<meta name="description" content="StayVia ‚Äî Property management for owners & tenants. Demo single-file app." />
<style>
  /* -------------------------
     Theme variables
     ------------------------- */
  :root{
    --green-700:#0f6b5e;
    --green-500:#138f6f;
    --muted:#6b7280;
    --bg:#f6f7f8;
    --card:#ffffff;
    --accent:#1f7f69;
    --glass: rgba(255,255,255,0.85);
    --shadow: 0 8px 24px rgba(16,24,40,0.08);
    --radius:14px;
    --maxw:1180px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,var(--bg),#fff 60%);
    color:#0f1724;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    line-height:1.45;
  }

  /* Layout container */
  .wrap{max-width:var(--maxw);margin:0 auto;padding:28px;}

  /* Header */
  header.site-header{display:flex;align-items:center;justify-content:space-between;padding:14px 0;}
  .brand{display:flex;align-items:center;gap:12px}
  .brand .logo{
    width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--green-700),var(--green-500));
    display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:20px;box-shadow:var(--shadow);
  }
  .brand h1{margin:0;font-size:20px;letter-spacing:0.2px}
  nav.header-actions{display:flex;gap:12px;align-items:center}
  .btn{
    background:var(--accent);color:#fff;padding:10px 16px;border-radius:10px;border:0;cursor:pointer;font-weight:600;
    box-shadow: 0 6px 18px rgba(18, 82, 69, 0.12);
  }
  .btn.ghost{background:transparent;color:var(--green-700);border:1px solid rgba(15,107,94,0.08)}

  /* Hero */
  .hero{
    display:grid;grid-template-columns:1fr 520px;gap:40px;align-items:center;padding:36px 0;
  }
  .hero-left h2{font-size:56px;margin:0 0 12px;line-height:0.95}
  .tagline{color:var(--muted);font-size:18px;margin-bottom:20px}
  .cta-row{display:flex;gap:12px;align-items:center}
  .cta-secondary{background:transparent;border:0;color:var(--muted);font-weight:600;cursor:pointer}
  .hero-right{
    background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,250,250,0.9));
    padding:18px;border-radius:18px;box-shadow:var(--shadow);display:flex;align-items:center;justify-content:center;
  }

  /* Four preview tiles (simulate the 4 images grid) */
  .preview-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .preview-card{
    background:linear-gradient(180deg,#fff,#fbfcfd);padding:12px;border-radius:12px;border:1px solid rgba(16,24,40,0.03);
    display:flex;flex-direction:column;gap:10px;min-height:140px;
  }
  .preview-card .title{font-weight:700}
  .preview-art{
    flex:1;border-radius:10px;background:linear-gradient(135deg,#fff,#eef6f2);display:flex;align-items:center;justify-content:center;
    color:var(--muted);font-weight:700;border:1px dashed rgba(15,107,94,0.07)
  }

  /* Why choose & feature cards */
  .why{padding:28px 0}
  .heading{font-size:40px;text-align:center;margin:26px 0}
  .sub{color:var(--muted);text-align:center;margin-top:6px}
  .features{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:28px}
  .feature-card{background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow);text-align:center}
  .feature-icon{width:56px;height:56px;margin:0 auto;border-radius:12px;background:#e8faf1;display:flex;align-items:center;justify-content:center;color:var(--green-700);font-weight:700;margin-bottom:8px}

  /* Role selector tiles */
  .roles{display:flex;gap:20px;margin:36px 0}
  .role-tile{flex:1;border-radius:14px;padding:28px;color:#fff;font-weight:700;display:flex;flex-direction:column;gap:8px;min-height:160px;align-items:flex-start;justify-content:center}
  .role-owner{background:linear-gradient(150deg,#0f6b5e,#0b5a50)}
  .role-tenant{background:linear-gradient(150deg,#0fa069,#0b8b63)}

  /* Small center container to simulate login/signup cards */
  .card-wrap{max-width:420px;margin:0 auto;background:linear-gradient(180deg,rgba(255,255,255,0.98),#fff);padding:26px;border-radius:14px;box-shadow:var(--shadow)}
  .form-group{margin-bottom:14px}
  label{display:block;font-size:13px;margin-bottom:6px;color:var(--muted)}
  input,select{width:100%;padding:12px;border-radius:8px;border:1px solid rgba(16,24,40,0.06);font-size:15px}
  .primary-full{width:100%;padding:12px;border-radius:10px;border:0;background:#9fc7f1;color:#fff;font-weight:700;cursor:pointer;margin-top:10px}

  /* Dashboard view */
  .dash{
    display:grid;grid-template-columns:220px 1fr;gap:18px;padding:20px 0;
  }
  .dash-aside{background:var(--card);padding:12px;border-radius:12px;box-shadow:var(--shadow)}
  .dash-main{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow)}
  .owner-panel h3{margin-top:0}
  .uploader-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-top:10px}
  .thumb{height:60px;border-radius:6px;background:linear-gradient(135deg,#fff,#eef6f2);display:flex;align-items:center;justify-content:center;color:var(--muted);font-weight:700;border:1px dashed rgba(16,24,40,0.04)}

  /* Tenant list */
  .list-item{display:flex;gap:12px;align-items:center;padding:12px;border-bottom:1px solid rgba(16,24,40,0.03)}
  .map-card{height:220px;border-radius:8px;background:linear-gradient(180deg,#fff,#eef8ff);display:flex;align-items:center;justify-content:center;color:var(--muted);font-weight:700}
  .search-row{display:flex;gap:8px;align-items:center;margin-bottom:12px}

  /* simple responsive */
  @media (max-width:980px){
    .hero{grid-template-columns:1fr; padding:20px 0}
    .features{grid-template-columns:1fr}
    .roles{flex-direction:column}
    .dash{grid-template-columns:1fr}
  }
  @media (max-width:520px){
    .hero-left h2{font-size:36px}
    .heading{font-size:28px}
  }

  /* small utility */
  .muted{color:var(--muted)}
  .center{text-align:center}
  .hidden{display:none}
  .fade-enter{opacity:0;transform:translateY(8px)}
  .fade-enter-active{transition:all .28s ease;opacity:1;transform:none}

  /* ====== small signup-specific styles (only these lines added) ====== */
  /* when signup form is complete, make button dark blue */
  .primary-full.signup-ready {
    background: #0b3670 !important;
    box-shadow: 0 8px 20px rgba(11,54,112,0.18);
  }

  /* when login form is complete, make button dark blue */
  .primary-full.login-ready {
    background: #0b3670 !important;
    box-shadow: 0 8px 20px rgba(11,54,112,0.18);
  }

  /* ===== small login alert styles ===== */
  .login-alert{
    border-radius:8px;padding:10px 12px;margin-bottom:12px;font-weight:600;font-size:14px;
    display:block;
  }
  .login-alert.hidden{display:none}
  .login-alert.error{
    background:#fff0f0;color:#8b0000;border:1px solid #f5c2c7;
  }
  .login-alert.success{
    background:#f0fff6;color:#064e3b;border:1px solid #b6f2d6;
  }
</style>
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <header class="site-header" role="banner">
      <div class="brand" onclick="goHome()" style="cursor:pointer">
        <div class="logo">üè†</div>
        <h1>StayVia</h1>
      </div>
      <nav class="header-actions" role="navigation" aria-label="header-actions">
        <!-- top-right Get Started removed per request; only Login remains -->
        <button id="headerLoginBtn" class="btn" onclick="showLogin()">Login</button>
      </nav>
    </header>

    <!-- SPA Views -->
    <main id="appRoot" aria-live="polite">

      <!-- HOME / FRONT PAGE: unchanged -->
      <section id="homeView">
        <div class="hero">
          <div class="hero-left">
            <h2>Welcome to<br/>StayVia</h2>
            <div class="tagline">Your Trusted Property Management Platform</div>
            <div class="cta-row">
              <button class="btn" onclick="showGetStarted()">Get Started</button>
            </div>
          </div>

          <!-- hero-right uses local file path (unchanged) -->
          <div class="hero-right" aria-hidden="false">
            <img
              src="stayvia_web_app_image.png"
              alt="StayVia Dashboard Preview"
              style="width:100%;border-radius:16px;box-shadow:0 20px 40px rgba(0,0,0,0.12);border:1px solid rgba(16,24,40,0.04)"
            >
          </div>
        </div>

        <section class="why">
          <h3 class="heading">Why Choose StayVia?</h3>
          <div class="sub">A complete solution for property owners and tenants</div>

          <div class="features" style="margin-top:22px">
            <div class="feature-card">
              <div class="feature-icon">üìä</div>
              <div style="font-weight:700;margin-bottom:6px">Easy Management</div>
              <div class="muted">Manage properties, tenants, and payments in one place</div>
            </div>

            <div class="feature-card">
              <div class="feature-icon">üôÇ</div>
              <div style="font-weight:700;margin-bottom:6px">Tenant Support</div>
              <div class="muted">Real-time communication and issue resolution</div>
            </div>

            <div class="feature-card">
              <div class="feature-icon">‚úÖ</div>
              <div style="font-weight:700;margin-bottom:6px">Secure & Reliable</div>
              <div class="muted">Your data is protected with enterprise-grade security</div>
            </div>
          </div>

          <div style="margin-top:26px;display:grid;grid-template-columns:1fr 1fr;gap:20px">
            <div class="feature-card">
              <div class="feature-icon">‚ö†Ô∏è</div>
              <div style="font-weight:700;margin-bottom:6px">Smart Analytics</div>
              <div class="muted">Get insights into your property performance</div>
            </div>
            <div style="background:transparent"></div>
          </div>
        </section>

        <h3 style="text-align:center;margin-top:26px;font-size:36px">Choose Your Role</h3>
        <div class="roles">
          <div class="role-tile role-owner">
            <div style="width:48px;height:48px;border-radius:10px;background:rgba(255,255,255,0.08);display:flex;align-items:center;justify-content:center">üè†</div>
            <div style="font-size:20px">Property Owner</div>
            <div style="color:rgba(255,255,255,0.9);font-weight:400">Manage multiple properties, track rentals, and view analytics</div>
            <div style="margin-top:8px"><button class="btn" onclick="selectRole('owner')">I'm an Owner</button></div>
          </div>
          <div class="role-tile role-tenant">
            <div style="width:48px;height:48px;border-radius:10px;background:rgba(255,255,255,0.08);display:flex;align-items:center;justify-content:center">üë§</div>
            <div style="font-size:20px">Tenant</div>
            <div style="color:rgba(255,255,255,0.9);font-weight:400">Find properties, communicate with owners, and pay rent</div>
            <div style="margin-top:8px"><button class="btn" onclick="selectRole('tenant')">I'm a Tenant</button></div>
          </div>
        </div>
      </section>

      <!-- LOGIN / GET STARTED CARD (unchanged except alert area added) -->
      <section id="loginView" class="hidden center" role="form" aria-label="login form">
        <div class="card-wrap" style="margin-top:28px">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
            <div style="font-size:26px">üè†</div>
            <h2 style="margin:0">Stayvia</h2>
          </div>
          <h3 style="margin-top:8px">Login to Your Account</h3>

          <!-- alert area: will show webhook response messages -->
          <div id="loginAlert" class="login-alert hidden" role="status" aria-live="polite"></div>

          <div class="form-group">
            <label>Email</label>
            <input id="loginEmail" type="email" placeholder="Enter your email" />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input id="loginPassword" type="password" placeholder="Enter your password" />
          </div>
          <button id="loginBtn" class="primary-full" onclick="doLogin()">Login</button>

          <div style="text-align:center;margin-top:12px;color:var(--muted)">
            Don't have an account? <a href="#" onclick="showSignup();return false">Sign up</a>
          </div>
        </div>
      </section>

      <!-- SIGNUP: SELECT REMOVED (only full name, email, password remain) -->
      <section id="signupView" class="hidden center" role="form" aria-label="signup form">
        <div class="card-wrap" style="margin-top:20px">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
            <div style="font-size:26px">üè†</div>
            <h2 style="margin:0">Stayvia</h2>
          </div>
          <h3 style="margin-top:8px">Create Your Account</h3>

          <div class="form-group">
            <label>Full Name</label>
            <input id="signupName" placeholder="Enter your full name" />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input id="signupEmail" placeholder="Enter your email" />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input id="signupPassword" type="password" placeholder="Enter your password" />
          </div>

          <!-- removed the "I am a..." select as requested -->

          <!-- signup button keeps same id so script toggles color -->
          <button id="signupBtn" class="primary-full" onclick="doSignup()">Sign Up</button>
        </div>
      </section>

      <!-- DASHBOARD (unchanged) -->
      <section id="dashboardView" class="hidden" aria-live="polite">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <h2 style="margin:0">Dashboard</h2>
          <div>
            <span id="userGreeting" style="Color:var(--muted);margin-right:12px"></span>
            <button class="btn ghost" onclick="logout()">Logout</button>
          </div>
        </div>

        <div class="dash" style="margin-top:16px">
          <aside class="dash-aside">
            <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
              <div style="width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,#fff,#eef6f2);display:flex;align-items:center;justify-content:center">üè†</div>
              <div>
                <div style="font-weight:700" id="dashName">Owner</div>
                <div class="muted" id="dashRole">Role</div>
              </div>
            </div>

            <nav style="display:flex;flex-direction:column;gap:8px">
              <button class="btn ghost" onclick="showDashSection('owner')">List a Property</button>
              <button class="btn ghost" onclick="showDashSection('tenant')">Search Properties</button>
            </nav>
          </aside>

          <section class="dash-main" id="dashMain">
            <!-- default: Owner panel with upload & small form -->
            <div class="owner-panel" id="ownerPanel">
              <h3>Owner - List Your Property</h3>
              <div style="margin-top:8px">
                <label style="font-size:13px;color:var(--muted)">House Name</label>
                <input id="propName" placeholder="Sunrise Apartments" />
              </div>
              <div style="margin-top:8px">
                <label style="font-size:13px;color:var(--muted)">Address</label>
                <input id="propAddress" placeholder="123 Main St, Cityville" />
              </div>

              <div style="margin-top:12px">
                <label style="font-size:13px;color:var(--muted)">Upload Photos</label>
                <div class="uploader-grid">
                  <div class="thumb">Front</div><div class="thumb">Kitchen</div><div class="thumb">Living</div><div class="thumb">Bedroom</div><div class="thumb">Bathroom</div>
                </div>
              </div>

              <div style="margin-top:12px">
                <button class="btn" onclick="alert('Register flow mocked ‚Äî integrate backend to actually register property')">Register</button>
              </div>
            </div>

            <div id="tenantPanel" class="hidden">
              <h3>Tenant - Find a Property</h3>
              <div class="search-row">
                <input placeholder="Search city or area" style="flex:1;padding:10px;border-radius:8px;border:1px solid rgba(16,24,40,0.06)"/>
                <button class="btn" onclick="alert('Search mocked')">Search</button>
              </div>

              <div style="display:flex;gap:12px">
                <div style="flex:1">
                  <div class="list-item">
                    <div style="width:88px;height:68px;border-radius:8px;background:#f4f7fb;display:flex;align-items:center;justify-content:center">Img</div>
                    <div>
                      <div style="font-weight:700">Green Villa</div>
                      <div class="muted" style="font-size:13px">456 Elm St, Downtown ‚Ä¢ 1.2 miles away ‚Ä¢ Available</div>
                    </div>
                  </div>

                  <div class="list-item">
                    <div style="width:88px;height:68px;border-radius:8px;background:#f4f7fb;display:flex;align-items:center;justify-content:center">Img</div>
                    <div>
                      <div style="font-weight:700">Cozy Cottage</div>
                      <div class="muted" style="font-size:13px">122 Maple Ave ‚Ä¢ 1.8 miles away ‚Ä¢ Fully Booked</div>
                    </div>
                  </div>
                </div>

                <div style="width:320px">
                  <div class="map-card">Map & Location popup</div>
                </div>
              </div>
            </div>

          </section>
        </div>
      </section>

    </main>
    <footer style="text-align:center;padding:36px 0;color:var(--muted)">¬© <strong>StayVia</strong> ‚Äî Demo interface ‚Ä¢ Made by you</footer>
  </div>

<script>
  /* SPA helper and state */
  const views = {
    home: document.getElementById('homeView'),
    login: document.getElementById('loginView'),
    signup: document.getElementById('signupView'),
    dashboard: document.getElementById('dashboardView')
  };

  function hideAll(){
    Object.values(views).forEach(v => v.classList.add('hidden'));
  }
  function goHome(){
    hideAll(); views.home.classList.remove('hidden');
    history.replaceState({view:'home'}, '', '#home');
  }
  function showLogin(){
    hideAll(); views.login.classList.remove('hidden');
    history.pushState({view:'login'}, '', '#login');
    // clear any previous alert when showing login
    clearLoginAlert();
  }
  function showSignup(){
    // Clear signup fields whenever signup view opens so form is empty each time
    const nameEl = document.getElementById('signupName');
    const emailEl = document.getElementById('signupEmail');
    const passEl = document.getElementById('signupPassword');
    const signupBtnEl = document.getElementById('signupBtn');

    if(nameEl) nameEl.value = '';
    if(emailEl) emailEl.value = '';
    if(passEl) passEl.value = '';
    // ensure signup button class is reset
    if(signupBtnEl) signupBtnEl.classList.remove('signup-ready');

    hideAll(); views.signup.classList.remove('hidden');
    history.pushState({view:'signup'}, '', '#signup');

    // focus first field for convenience
    if(nameEl) nameEl.focus();
  }
  function showGetStarted(){
    // show get started -> same as login card for this demo
    showLogin();
  }
  function showDashboard(){
    hideAll(); views.dashboard.classList.remove('hidden');
    history.pushState({view:'dashboard'}, '', '#dashboard');
    renderDashboard();

    // ---------- MINIMAL CHANGE: hide top-right Login button when on dashboard ----------
    const hb = document.getElementById('headerLoginBtn');
    if(hb) hb.classList.add('hidden');
  }
  window.addEventListener('popstate', (e)=> {
    const s = (e.state && e.state.view) || 'home';
    if (s === 'home') goHome();
    else if (s === 'login') showLogin();
    else if (s === 'signup') showSignup();
    else if (s === 'dashboard') showDashboard();
  });

  // fake auth using localStorage
  async function doSignup(){
    const name = document.getElementById('signupName').value.trim();
    const email = document.getElementById('signupEmail').value.trim();
    const pass = document.getElementById('signupPassword').value;
    // role selection removed from form; default to 'tenant' for demo
    const role = 'tenant';

    if(!name || !email || !pass){ alert('Please fill all fields'); return; }

    const payload = {
      fullName: name,
      email: email,
      password: pass,
      source: "stayvia_web"
    };

    try {
      // Send to webhook
      await fetch("https://hook.eu2.make.com/1sbhaxcbq9ma12wtqkcp276wmzwf9mlt", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
    } catch (err) {
      // log error but continue to login page
      console.error("Webhook error:", err);
    }

    // store locally for demo session (same as before)
    const user = { name, email, role };
    localStorage.setItem('stayvia_user', JSON.stringify(user));

    // after signup click, go to login page (requested)
    showLogin();
  }

  // helper to show login alert (error or success)
  function showLoginAlert(message, type = 'error'){
    const el = document.getElementById('loginAlert');
    if(!el) return;
    el.textContent = message || '';
    el.classList.remove('hidden','error','success');
    if(type === 'error') el.classList.add('error');
    else el.classList.add('success');
  }
  function clearLoginAlert(){
    const el = document.getElementById('loginAlert');
    if(!el) return;
    el.textContent = '';
    el.classList.add('hidden');
    el.classList.remove('error','success');
  }

  // ====== CHANGED: send login details to your make.com webhook, then act on webhook response ======
  async function doLogin(){
    clearLoginAlert();

    const email = document.getElementById('loginEmail').value.trim();
    const pass = document.getElementById('loginPassword').value;
    if(!email || !pass){ showLoginAlert('Please fill both email and password', 'error'); return; }

    let responseJson = null;
    try {
      const res = await fetch("https://hook.eu2.make.com/t0fi9d96nv8d3j7rzcl7oo5q2sviply4", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email: email, password: pass, source: "stayvia_web_login" })
      });

      // attempt to parse JSON reply from webhook
      // webhook is expected to reply with one of:
      // { "status": "error", "message": "email not found" }
      // { "status": "success", "message": "Login successful" }
      // { "status": "error", "message": "Invalid password" }
      // but we'll defensively handle other shapes.
      responseJson = await res.json();
    } catch (err) {
      console.error("Login webhook error or invalid JSON:", err);
      showLoginAlert('Network error or invalid response from authentication server', 'error');
      return;
    }

    // handle the webhook response
    if(responseJson && typeof responseJson === 'object'){
      const status = (responseJson.status || '').toString().toLowerCase();
      const message = responseJson.message || 'Unknown response from server';
      if(status === 'success'){
        // login success -> continue to dashboard (same localStorage setup)
        const user = {name: email.split('@')[0], email, role: 'owner'};
        localStorage.setItem('stayvia_user', JSON.stringify(user));
        // optionally show a short success message before redirecting (not required)
        // showLoginAlert(message, 'success');
        showDashboard();
        return;
      } else {
        // error responses -> show message in red on login page
        showLoginAlert(message, 'error');
        return;
      }
    } else {
      showLoginAlert('Unexpected response from authentication server', 'error');
      return;
    }
  }
  // ====== end changed section ======

  function logout(){
    localStorage.removeItem('stayvia_user');
    goHome();

    // ---------- MINIMAL CHANGE: show top-right Login button again on logout ----------
    const hb = document.getElementById('headerLoginBtn');
    if(hb) hb.classList.remove('hidden');
  }
  function renderDashboard(){
    const u = JSON.parse(localStorage.getItem('stayvia_user')||'null');
    const greeting = document.getElementById('userGreeting');
    const dashName = document.getElementById('dashName');
    const dashRole = document.getElementById('dashRole');
    if(u){
      greeting.textContent = 'Signed in as ' + (u.name || u.email);
      dashName.textContent = (u.name || u.email);
      dashRole.textContent = (u.role || 'owner');
      document.getElementById('dashMain').querySelectorAll('.owner-panel,.search-row,#tenantPanel').forEach(n=>n.classList.remove('hidden'));
      // if role tenant, show tenant panel by default
      if(u.role === 'tenant'){
        showDashSection('tenant');
      } else {
        showDashSection('owner');
      }
    }else{
      greeting.textContent = '';
    }
  }
  function showDashSection(type){
    const ownerPanel = document.getElementById('ownerPanel');
    const tenantPanel = document.getElementById('tenantPanel');
    if(type === 'owner'){
      ownerPanel.classList.remove('hidden');
      tenantPanel.classList.add('hidden');
    } else {
      ownerPanel.classList.add('hidden');
      tenantPanel.classList.remove('hidden');
    }
  }

  function selectRole(r){
    // quick path: if no account, go signup
    const u = localStorage.getItem('stayvia_user');
    if(!u) showSignup();
    else {
      showDashboard();
      if(r === 'tenant') showDashSection('tenant');
      else showDashSection('owner');
    }
  }

  // ---------- signup-ready button toggle ----------
  // get elements (they exist because script runs at end of body)
  const signupNameEl = document.getElementById('signupName');
  const signupEmailEl = document.getElementById('signupEmail');
  const signupPassEl = document.getElementById('signupPassword');
  const signupBtnEl = document.getElementById('signupBtn');

  function updateSignupButtonState(){
    const nameVal = signupNameEl && signupNameEl.value.trim();
    const emailVal = signupEmailEl && signupEmailEl.value.trim();
    const passVal = signupPassEl && signupPassEl.value;
    if(nameVal && emailVal && passVal){
      signupBtnEl.classList.add('signup-ready');
    } else {
      signupBtnEl.classList.remove('signup-ready');
    }
  }

  // attach listeners if elements exist
  if(signupNameEl) signupNameEl.addEventListener('input', updateSignupButtonState);
  if(signupEmailEl) signupEmailEl.addEventListener('input', updateSignupButtonState);
  if(signupPassEl) signupPassEl.addEventListener('input', updateSignupButtonState);
  // run once on load
  updateSignupButtonState();

  // clear login alert when user edits login fields
  const loginEmailEl = document.getElementById('loginEmail');
  const loginPassEl = document.getElementById('loginPassword');
  if(loginEmailEl) loginEmailEl.addEventListener('input', clearLoginAlert);
  if(loginPassEl) loginPassEl.addEventListener('input', clearLoginAlert);

  // ---------- NEW: login-ready button toggle ----------
  const loginBtnEl = document.getElementById('loginBtn');

  function updateLoginButtonState(){
    const emailVal = loginEmailEl && loginEmailEl.value.trim();
    const passVal = loginPassEl && loginPassEl.value;
    if(emailVal && passVal){
      loginBtnEl && loginBtnEl.classList.add('login-ready');
    } else {
      loginBtnEl && loginBtnEl.classList.remove('login-ready');
    }
  }

  // attach input listeners to update login button state (also keep clearing alert behavior)
  if(loginEmailEl) loginEmailEl.addEventListener('input', () => { clearLoginAlert(); updateLoginButtonState(); });
  if(loginPassEl) loginPassEl.addEventListener('input', () => { clearLoginAlert(); updateLoginButtonState(); });

  // initialize based on hash / stored user
  (function init(){
    const user = localStorage.getItem('stayvia_user');
    const hash = location.hash.replace('#','');
    if(hash === 'login') showLogin();
    else if(hash === 'signup') showSignup();
    else if(hash === 'dashboard' && user) showDashboard();
    else if(user){
      // if user is present, show dashboard
      showDashboard();
    } else {
      goHome();
    }

    // ensure login button state is correct on initial load
    updateLoginButtonState();
  })();
</script>

</body>
</html>



